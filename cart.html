<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="styles/shop.css">
    <title>Cart</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>

<body>
    <nav class="navbar navbar-light bg-light justify-content-between">
        <a class="navbar-brand logo">
            <i class="fa-solid fa-bag-shopping"></i>
            Shoppy
        </a>
        <span class="navbar-text">
            <a class="btn btn-primary" id="cart-button-1" href="#">
                Clear Cart
            </a>
            <a class="btn btn-secondary" id="cart-button-2" href="#">Purchase</a>

        </span>
    </nav>

    <div class="wrap-items">

    </div>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script>

    if (localStorage.getItem('user') == null)
        window.location.href = "./login.html";

    if (!localStorage.getItem('cart').length) window.location.href = "./shop.html";


    const clearCartStorage = () => {
        localStorage.removeItem('cart');
        window.location.href = "./shop.html";
    }

    $(document).ready(function () {
        $('#cart-button-1').click(function () {
            $('#cart-button-1').toggleClass('active');
            clearCartStorage()

        })

    });


    $(document).ready(() => {
        let cartItems = JSON.parse(localStorage.getItem('cart'));
        cartItems = cartItems.filter((item) => item.id !== -1)
        cartItems.forEach((item) => {
            $('.wrap-items').append(`
            <div class="card" style="width: 18rem;">
                <img class="card-img-top" src="${item.pic}" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">${item.name}</h5>
                    <p class="card-text">${item.description}</p>
                    <p class="card-text">$${item.price}</p>
                    </div>
                    </div>
                    `)
            $(`#item-${item.id}`).click(() => {
                $(this).toggleClass('active');
                addItemToCart(item.id);
            })


        })

    })

</script>

</html>